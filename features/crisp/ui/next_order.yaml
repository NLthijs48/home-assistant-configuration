type: vertical-stack
cards:
  - type: custom:button-card
    name: ðŸ¥ Crisp
    template: header_standalone
  - type: horizontal-stack
    cards:
      # Information button
      - type: custom:button-card
        entity: sensor.crisp_next_order
        name: >-
          [[[ return states['sensor.crisp_next_order'].attributes.details; ]]]
        show_state: true
        show_icon: false
        show_name: true
        tap_action:
          action: url
          # When there is a delivery link: open that
          # Otherwise link to the order in the app (easy to start edit after that)
          url_path: >-
            [[[ return states['sensor.crisp_next_order_raw'].attributes.deliveryLink ? states['sensor.crisp_next_order_raw'].attributes.deliveryLink : 'com.freshfoodventures.crisp:///order/' + states['sensor.crisp_next_order_raw'].attributes.id; ]]]
        hold_action:
          # TODO: show custom popup with more order info
          action: more-info
          entity: sensor.crisp_next_order_raw
        styles:
          card:
            - height: 70px
            - marginRight: 0
          state:
            - placeSelf: flex-start
            - paddingLeft: 20px
            # Move it into the 'name' slot
            - gridArea: n / n / n / n
          name:
            - opacity: 0.6
            - fontSize: 85%
            - paddingTop: 3px
            - placeSelf: flex-start
            - paddingLeft: 20px
            # Move it into the 'state' slot
            - gridArea: s / s / s / s
      # Icon button
      - type: custom:button-card
        entity: sensor.crisp_next_order
        name: Details line
        show_state: false
        show_icon: true
        show_name: false
        styles:
          card:
            - height: 50px
            - width: 50px
            # Overlap it with the information button
            - marginLeft: "-58px"
            - boxShadow: 'none'
            - background: 'transparent'
            # Passthrough taps to the information button instead
            - pointerEvents: 'none'
          icon:
            - height: 25px
            - width: 25px